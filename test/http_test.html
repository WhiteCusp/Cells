<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Array Test Page</title>
  <link rel="stylesheet" href="./css/mocha.css">
</head>
<body>
  <div id="mocha"></div>
  <script src="../src/cell_http.js"></script>
  <script src="./js/mocha.js"></script>
  <script src="./js/chai.js"></script>
  <script>
    mocha.ui('tdd')
    var assert = chai.assert

    var cHttp = cell['http']

    suite('Module http Tests', function(){

      test('Function "ajax" Tests', function(){
        var ajaxData = [1,2,3,4,5],
            flag = true
        var successCB = function(data) {
          var json = cHttp.parseJSON(data)
          if(json.toString() !== ajaxData.toString()) { flag = false }
        }
        var errorCB = function() { flag = true; console.log(0); assert(flag) }
        var timeoutCB = function(data) { result = data }
        var option = {
          type: 'GET',
          onSuccess: successCB,
          onError: errorCB,
          dataType: 'application/json'
        }

        cHttp.ajax('data.php', option)
        flag = false
        cHttp.ajax('data_error.php', option)
      })

    })
  </script>
  <script>mocha.run()</script>
</body>
</html>